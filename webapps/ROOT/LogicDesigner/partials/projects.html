<div class="row SingleRowView">

	<table style="height: 100%; width: 100%;">
		<tr style="height: 100%;">
			<td style="height: 100%; min-width: 250px; vertical-align: top; padding-left: 5px;">
				<tabset>
					<tab heading="Details">
						<form role="form" style="padding-top: 10px;">
							<div class="form-group">
								<label for="projName">
									Project name:
									<i class="glyphicon glyphicon-question-sign ContextHelpButton" ng-click="helpDialog('project', 'ProjectName')"></i>
								</label>
								<input class="form-control" type="text" class="form-control" ng-model="selectedProj.name" id="projName" />
							</div>
							<div class="form-group">
								<table>
									<tr>
										<td>
											<label for="projUrlName" class="control-label">
												URL fragment:
												<i class="glyphicon glyphicon-question-sign ContextHelpButton" ng-click="helpDialog('project', 'ProjectURLName')"></i>
											</label>
											<input class="form-control" type="text" class="form-control" ng-model="selectedProj.url_name" id="projUrlName" />
										</td>
										<td style="padding-left: 30px;">
											<label>
												<input id="projActive" type="checkbox" ng-model="selectedProj.is_active" />
												Project is active
											</label>
											<i class="glyphicon glyphicon-question-sign ContextHelpButton" 
												ng-click="helpDialog('project', 'ProjectActive')"></i>
										</td>
									</tr>
								</table>
							</div>
							<div class="form-group">
								<label for="projAuthProv" class="control-label">
									Authentication provider:
									<i class="glyphicon glyphicon-question-sign ContextHelpButton" ng-click="helpDialog('project', 'ProjectAuth')"></i>
								</label>
								<select class="form-control" size="1" style="min-width: 100px;" ng-model="selectedProj.authprovider_ident"
										ng-options="ap.ident as ap.name for ap in data.authProviders" class="form-control">
									<option value="">-- None --
								</select>
							</div>
							<div class="form-group">
								<label for="projComments" class="control-label">Comments:</label>
								<textarea class="form-control" cols="50" rows="5" ng-model="selectedProj.comments" id="projComments" class="form-control"></textarea>
							</div>
							<div class="form-group">
								<button class="btn btn-primary" ng-click="saveProject()">Save</button>
								&nbsp;
								<button class="btn btn-default" ng-click="exportProject()" ng-disabled="!selectedProj" style="margin-left: 20px;">Export</button>
								<i class="glyphicon glyphicon-question-sign ContextHelpButton" ng-click="helpDialog('project', 'ProjectExport')"></i>
								&nbsp;
								
								<button class="btn btn-default" ng-click="verifyProject()" style="margin-left: 20px;">Verify</button>
								<i class="glyphicon glyphicon-question-sign ContextHelpButton" ng-click="helpDialog('project', 'ProjectVerify')"></i>
								&nbsp;&nbsp;
								<button class="btn btn-warning" ng-click="deleteProject()" id="projectDeleteButton">Delete</button>
							</div>
						</form>
					</tab>
					<tab heading="Settings">
						<form class="form-horizontal" style="padding-top: 10px;">
							<table>
								<tr ng-repeat="optionType in optionTypes" style="border-bottom: solid 1px #DDDDDD;">
									<td style="padding: 5px;">
										<label for="optionType{{optionType.ident}}">
											{{optionType.name}}
										</label>
									</td>
									<td style="padding: 5px;">
										<project-option option-type="optionType" option-values="projectOptionValues"
											option-type-enums="optionTypeEnums"/>
									</td>
									<td style="padding: 5px;">
										<i class="glyphicon glyphicon-question-sign ContextHelpButton" ng-click="helpDialog('project', 'Option'+optionType.ident)"></i>
									</td>
								</tr>
							</table>
							<button class="btn btn-primary" ng-click="saveProjectOptions()" style="margin-left: 20px;">Save</button>
						</form>
					</tab>
					<tab heading="Libraries">
						<div style="overflow: auto;">
							<tabset>
								<tab heading="System libraries">
									<table class="table table-striped table-bordered table-condensed table-hover">
										<thead style="font-weight: bold; background-color: #BBBBBB;">
											<tr>
												<td>Used</td>
												<td>Name</td>
												<td>Version</td>
												<td>Description</td>
												<td>Links</td>
											</tr>
										</thead>
										<tr ng-repeat="lib in data.libs" ng-class-even="LibraryTableRowEven" ng-class-odd="LibraryTableRowOdd">
											<td><input type="checkbox" ng-model="data.usedLibs[lib.ident]"/></td>
											<td>{{lib.name}}</td>
											<td>{{lib.version}}</td>
											<td>{{lib.description}}</td>
											<td>
												<div ng-show="lib.doc_url" >
													<a class="link" href="{{lib.doc_url}}" target="_blank">Docs</a>
													<br/>
												</div>
												<a class="link" ng-show="lib.ref_url" href="{{lib.ref_url}}" target="_blank">Refs</a>
											</td>
										</tr>
									</table>
								</tab>
								<tab heading="Your libraries">
									<table class="table table-striped table-bordered table-condensed table-hover">
										<thead style="font-weight: bold; background-color: #BBBBBB;">
											<tr>
												<td>&nbsp;</td>
												<td>Used</td>
												<td>Name</td>
												<td>Version</td>
												<td>Description</td>
												<td>Links</td>
											</tr>
										</thead>
										<tr ng-repeat="lib in data.acctlibs" ng-class-even="LibraryTableRowEven" ng-class-odd="LibraryTableRowOdd">
											<td style="width: 6em;">
												<a class="glyphicon glyphicon-remove" title="Delete this library"
														style="cursor: pointer; padding-right: 20px;" ng-click="deleteLib(lib)"></a>
												<a style="cursor: pointer;" ng-click="editLib(lib)">Edit</a>
											</td>
											<td><input type="checkbox" ng-model="data.usedLibs[lib.ident]"/></td>
											<td>{{lib.name}}</td>
											<td>{{lib.version}}</td>
											<td>{{lib.description}}</td>
											<td>
												<div ng-show="lib.doc_url" >
													<a class="link" href="{{lib.doc_url}}" target="_blank">Docs</a>
													<br/>
												</div>
												<a class="link" ng-show="lib.ref_url" href="{{lib.ref_url}}" target="_blank">Refs</a>
											</td>
										</tr>
									</table>
									<button class="btn btn-default" ng-click="createLib()">Create new library</button>
								</tab>
							</tabset>
						</div>
						<button class="btn btn-primary" ng-click="saveLibs()">Save</button>
						<!-- <button class="btn btn-default" ng-click="uploadLibrary()">Upload new library</button> -->
					</tab>
					<tab heading="Authentication Providers">
						<table style="height: 100%; width: 100%;">
							<tr style="height: 100%;">
								<td class="ResizableTd" id="authListTd" style="min-width: 100px;">
									<div class="ScrollableList btn-horizontal-2" style="width: 100%;">
										<div class="ScrollableListHeader">Authentication Providers</div>
										<div class="ScrollableListControlHeader"><button type="button" class="btn btn-list-control btn-xs"
													ng-click="createAuthProvider();">
												<span class="fa fa-plus-circle ScrollableListControl"></span>
												Add
											</button><button type="button" class="btn btn-list-control btn-xs"
													ng-click="deleteAuthProvider(data.currentAuthProvider);"
													ng-disabled="!data.currentAuthProvider">
												<span class="fa fa-minus-circle ScrollableListControl"></span>
												Delete
											</button></div>
										<div class="ResizableColumn" id="authProvidersDiv">
											<select size="20" class="ObjectList" style="min-width: 100%;" ng-model="data.currentAuthProvider"
													ng-options="authProvider.name for authProvider in data.authProviders"
													ng-change="authProviderSelected()">
											</select>
										</div>
									</div>
								</td>
								<td class="ResizableBodyTd">
									<div style="overflow: auto;" class="row">
										<strong>Selected Provider</strong>
										<br>
										<br>
										<div ng-hide="data.currentAuthProvider">
											Not selected - select an Authentication Provider on the left to edit.
										</div>
										<div ng-show="data.currentAuthProvider">
											<label for="authProviderName">Name</label>
											<input type="text" class="form-control" id="authProviderName" ng-model="data.currentAuthProvider.name" ng-change="authProviderValueChanged();">
											<br>
											<label for="authTypeId">Authentication Method</label>
											<select id="authTypeId" class="form-control"
													ng-model="data.currentAuthType"
													ng-options="authType.display_name for authType in data.authTypes"
													ng-change="authTypeSelected();">
											</select>
											<br>
											<div ng-show="data.currentAuthType.config_name">
												<label>
													{{data.currentAuthType.config_name}}:
												</label>
												<input class="form-control" type="text" ng-model="data.currentAuthProvider.bootstrap_config_value" ng-change="bootstrapConfigValueChanged();">
												<div ng-show="data.authProviderConfigurationError"><br>{{data.authProviderConfigurationError}}<br><br></div>
											</div>
											<div ng-show="data.currentAuthProviderConfiguration">
												<div ng-repeat="field in data.currentAuthProviderConfiguration.fields">
													<label>
														{{field.display}}
													</label>
													<input type="text" class="form-control" ng-model="data.currentAuthProviderConfiguration.current[field.name]"
														placeholder="{{field.description}}" maxlength="{{field.length}}" ng-change="authConfigValueChanged();">
													<br>
												</div>
											</div>
											<label for="authProviderComments">Comments</label>
											<textarea rows="5" class="form-control" id="authProviderComments" ng-model="data.currentAuthProvider.comments" ng-change="authProviderValueChanged();"></textarea>
											<br>
											<button class="btn btn-primary" ng-click="saveAndConfigureAuthProvider(data.currentAuthProvider)"
												ng-disabled="!data.currentAuthProvider.isChanged">Save</button>
											&nbsp;&nbsp;
											<button class="btn btn-default" ng-click="revertAuthProvider(data.currentAuthProvider)"
												ng-disabled="!data.currentAuthProvider.isChanged">Revert</button>
										</div>
									</div>
								</td>
							</tr>
						</table>
					</tab>
					<tab active="data.topicsTab" >
					   <tab-heading class="topics-tab">Topics</tab-heading>
						<table style="height: 100%; width: 100%;">
							<tr style="height: 100%;">
								<td class="ResizableTd" id="authListTd" style="min-width: 100px;">
									<div class="ScrollableList btn-horizontal-2" style="width: 100%;">
										<div class="ScrollableListHeader">Topics</div>
										<div class="ScrollableListControlHeader"><button type="button" class="btn btn-list-control btn-xs"
													ng-click="createTopic();">
												<span class="fa fa-plus-circle ScrollableListControl"></span>
												Add
											</button><button type="button" class="btn btn-list-control btn-xs"
													ng-click="deleteTopic();"
													ng-disabled="!data.currentTopic">
												<span class="fa fa-minus-circle ScrollableListControl"></span>
												Delete
											</button></div>
										<div class="ResizableColumn">
											<select size="20" class="ObjectList" style="min-width: 100%;" ng-model="data.currentTopic"
													ng-options="topic.name for topic in data.topics">
											</select>
										</div>
									</div>
								</td>
								<td class="ResizableBodyTd">
									<div class="row">
										<table style="width: 100%;">
											<tr>
												<td style="text-align: right; padding: 4px;"><label for="topicName">Topic name:</label></td>
												<td><input class="form-control" type="text" size="50" maxlength="200" id="topicName" 
													ng-model="data.currentTopic.name"/>
												</td>
											</tr>
											<tr>
											 <td> </td>
											     <td>
													<a ng-click="helpDialog('project', 'Topics')" style="cursor: pointer; margin:5px 0 -5px 0;display:block;">What is a topic?</a><br/>
												</td>
											</tr>
											<tr>
												<td style="text-align: right; padding: 4px;"><label for="topicSummary">Summary:</label></td>
												<td><textarea class="form-control" maxlength="300" id="topicSummary" rows="2" style="resize: both; width: 70%;" 
													ng-model="data.currentTopic.summary"></textarea><br/></td>
											</tr>
											<tr>
												<td style="text-align: right; padding: 4px;"><label for="topicColor">Color:</label></td>
												<td><input type="color" id="topicColor" 
													ng-model="data.currentTopic.color"/></td>
											</tr>
										</table>										
									</div>
									<div style="overflow: auto;" class="row">
										<textarea name="topicEditor" id="topicEditor" rows="25" cols="80"
											style="resize: both;" ng-model="data.currentTopic.description"></textarea>
										{{editorMessage}}
									</div>
									<br/>
									<button class="btn btn-primary" ng-click="saveTopic()">Save</button>
								</td>
							</tr>
						</table>
					</tab>
				</tabset>
			</td>
		</tr>
	</table>
</div>
<iframe id="downloadIframe" style="display: none;"></iframe>
